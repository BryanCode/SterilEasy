let codigoPlanoBeneficiario = ""; // Certifique-se de definir isso anteriormente
let codigoAbrangenciaRegional = "";
// Faz uma solicita√ß√£o AJAX para obter o token do servidor
const containerFluid = document.querySelector(".container-fluid");

var overlay = document.getElementById('loading-overlay');


async function getToken() {
try {
const response = await fetch(`/wp-content/themes/bones/arquivoToken.php?action=getToken`);
if (response.ok) {
const data = await response.json();
const token = data.token;
return token;
} else {
throw new Error('Erro ao obter o token');
}
} catch (error) {
console.error('Erro na solicita√ß√£o AJAX:', error);
throw error;
}
}

document.getElementById("form-identificador").addEventListener("submit", async function(event) {

event.preventDefault();

// Chamando fun√ß√£o getToken() para obter o token
const token = await getToken();


const cpf = document.getElementById("cpf").value.replace(/[.-]/g, '');
const birthdate = formatDate(document.getElementById("nascimento").value);

// Construir a URL corretamente
const apiUrl = `https://api.uniodontopoa.com.br/api/ListaBeneficiarioPlanoT?CPF=${cpf}&NASCIMENTO=${birthdate}`;

try {
const response = await fetch(apiUrl, {
headers: {
"Authorization": `Bearer ${token}`
}
});
const data = await response.json();


if (Array.isArray(data) && data.length > 0) {

const usuario = data[0];

if (usuario.nome_usuario_titular && usuario.numero_cpf_usuario_titular || usuario.nome_usuario_dep &&
usuario.numero_cpf_usuario_dependente) {

const descricaoPlano = usuario.descricao_plano || 'Descri√ß√£o do plano n√£o encontrada';
const nomeBeneficiario = usuario.nome_social || usuario.nome_usuario_titular || usuario.nome_usuario_dep;
codigoAbrangenciaRegional = usuario.str_cod_abrangencia_regional || '';
codigoPlanoBeneficiario = usuario.id_plano || '';

// Exiba a descri√ß√£o do plano no par√°grafo com o id "descricao-plano"
const descricaoPlanoElement = document.getElementById("descricao-plano");
const textoApresentacaoUmElement = document.getElementById("texto-apresentacao-um");
const nomeBeneficiarioElement = document.getElementById("nome-beneficiario");
const textoApresentacaoDoisElement = document.getElementById("texto-apresentacao-dois");
const textoApresentacaoTresElement = document.getElementById("texto-apresentacao-tres");

nomeBeneficiarioElement.innerHTML = `Ol√°, <strong id="nomeStrong">${getFirstName(nomeBeneficiario)}</strong> Encontre
seu dentista aqui üòä`;

descricaoPlanoElement.innerHTML = `Voc√™ √© benefici√°rio(a) do plano <strong id="nomeStrong">${descricaoPlano}</strong>`;
textoApresentacaoDoisElement.textContent = `Est√° em busca do dentista perfeito para cuidar da sua sa√∫de bucal?`;
textoApresentacaoTresElement.textContent = `Abaixo, voc√™ encontra uma lista completa de prestadores prontos para
oferecer cuidado e aten√ß√£o personalizados.`;

// Verifique o valor de codigoAbrangenciaRegional e oculte o campo de busca do estado, se necess√°rio
if (codigoAbrangenciaRegional === "3" || codigoAbrangenciaRegional === "4" || codigoAbrangenciaRegional === "5") {
// Se for "3", oculte a label e o select
const labelEstado = document.querySelector("label[for='estado']");
const estadoSelect = document.getElementById("estado");
estadoLabel.style.display = "none";
estadoSelect.style.display = "none"; // Oculta o campo de busca do estado

// Definindo o estado como "RS" automaticamente
estadoSelect.value = "RS";


// Chamando a fun√ß√£o buscarCidades com os argumentos
buscarCidades(codigoPlanoBeneficiario, codigoAbrangenciaRegional);

}

// Mostrando a div "form-unipoa" e oculte a div "form-identificador"
const divUnipoa = document.getElementById("form-unipoa");
const divIdentificador = document.getElementById("form-identificador");
divUnipoa.style.display = "block";
divIdentificador.style.display = "none";


} else {
alert("Autentica√ß√£o falhou. Verifique suas informa√ß√µes.");
}
} else {
alert("Voc√™ n√£o √© benefici√°rio Uniodonto Porto Alegre");
}
} catch (error) {
console.error("Erro ao consultar a API:", error);
}



});

//fun√ß√£o para extrair o primeiro nome de um nome completo
function getFirstName(name) {
const parts = name.split(" ");
//retorna apenas o primeiro nome com a primeira letra maiuscula e as outras minusculas
parts[0] = parts[0].charAt(0).toUpperCase() + parts[0].slice(1).toLowerCase();
return parts[0];
}

// Fun√ß√£o para redefinir a mensagem

const baseUrl = "https://api.uniodontopoa.com.br/api";

// Base Brasil
const estadoSelect = document.getElementById("estado");
const cidadeSelect = document.getElementById("cidade");
const bairroSelect = document.getElementById("bairro");
const especialidadeSelect = document.getElementById("Area_de_atuacao");
const croInput = document.getElementById("cro");
const nomeInput = document.getElementById("nome");
const listaProfissionais = document.getElementById("listaProfissionais");
const erroMensagem = document.getElementById("erroMensagem");
const btnCarregar = document.getElementById("btnCarregar");

estadoSelect.addEventListener("change", function() {
const estadoSelecionado = estadoSelect.value;
buscarCidades(codigoPlanoBeneficiario, codigoAbrangenciaRegional, estadoSelecionado);
});

function sortAlphabetically(arr) {
return arr.sort((a, b) => a.localeCompare(b));
}

async function buscarCidades( codigoPlanoBeneficiario, codigoAbrangenciaRegional) {

const estadoSelecionado = estadoSelect.value;
const token = await getToken();


if (codigoAbrangenciaRegional === "1" || codigoAbrangenciaRegional === "") {

try {
// Realize uma solicita√ß√£o para buscar as cidades com base no estado
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Estado=${estadoSelecionado}`, {
headers: {
Authorization: `Bearer ${token}`
}
});

const data = await response.json();
var cidades = [...new Set(data.map(prestador => prestador.Cidade))]; // Remove duplicatas
cidades = sortAlphabetically(cidades);


cidadeSelect.innerHTML = "<option value=''>Selecione uma cidade</option>"; // Limpa as op√ß√µes existentes

// Crie um conjunto para rastrear as cidades adicionadas
const cidadesAdicionadas = new Set();

// Mapeamento de estados para capitais (insira mais estados e capitais, se necess√°rio)
const capitais = {
"AC": "RIO BRANCO",
"AL": "MACEI√ì",
"AM": "MANAUS",
"BA": "SALVADOR",
"CE": "FORTALEZA",
"DF": "BRAS√çLIA",
"ES": "VIT√ìRIA",
"GO": "GOI√ÇNIA",
"MA": "S√ÉO LU√çS",
"MT": "CUIAB√Å",
"MS": "CAMPO GRANDE",
"MG": "BELO HORIZONTE",
"PA": "BEL√âM",
"PB": "JO√ÉO PESSOA",
"PR": "CURITIBA",
"PE": "RECIFE",
"PI": "TERESINA",
"RJ": "RIO DE JANEIRO",
"RN": "NATAL",
"RS": "PORTO ALEGRE",
"RO": "PORTO VELHO",
"RR": "BOA VISTA",
"SC": "FLORIAN√ìPOLIS",
"SP": "S√ÉO PAULO",
"SE": "ARACAJU",
"TO": "PALMAS",
};

// Adicione a capital como a primeira cidade, em mai√∫sculas, apenas se ainda n√£o foi adicionada
const capital = capitais[estadoSelecionado];
if (capital && !cidadesAdicionadas.has(capital.toUpperCase())) {
cidadeSelect.innerHTML += `<option value="${capital}">${capital}</option>`;
cidadesAdicionadas.add(capital.toUpperCase());
}

// Adicione as outras cidades encontradas como op√ß√µes em mai√∫sculas
cidades.forEach(cidade => {
cidade = cidade.toUpperCase(); // Converta para mai√∫sculas
if (!cidadesAdicionadas.has(cidade)) {
cidadeSelect.innerHTML += `<option value="${cidade}">${cidade}</option>`;
cidadesAdicionadas.add(cidade);
}
});

} catch (error) {
console.error("Erro ao buscar cidades:", error);
}
} else if (codigoAbrangenciaRegional === "3") {
try {
// Realize uma solicita√ß√£o para buscar as cidades com base no estado
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Estado=RS`, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();
const cidades = [...new Set(data.map(prestador => prestador.Cidade))]; // Remove duplicatas

cidadeSelect.innerHTML = "<option value=''>Selecione uma cidade</option>"; // Limpa as op√ß√µes existentes

// Crie um conjunto para rastrear as cidades adicionadas
const cidadesAdicionadas = new Set();

// Mapeamento de estados para capitais (insira mais estados e capitais, se necess√°rio)
const capitais = {

"RS": "PORTO ALEGRE",

};

// Adicione a capital como a primeira cidade, em mai√∫sculas, apenas se ainda n√£o foi adicionada
const capital = capitais[estadoSelecionado];
if (capital && !cidadesAdicionadas.has(capital.toUpperCase())) {
cidadeSelect.innerHTML += `<option value="${capital}">${capital}</option>`;
cidadesAdicionadas.add(capital.toUpperCase());
}

// Adicione as outras cidades encontradas como op√ß√µes em mai√∫sculas
cidades.forEach(cidade => {
cidade = cidade.toUpperCase(); // Converta para mai√∫sculas
if (!cidadesAdicionadas.has(cidade)) {
cidadeSelect.innerHTML += `<option value="${cidade}">${cidade}</option>`;
cidadesAdicionadas.add(cidade);
}
});
} catch (error) {
console.error("Erro ao buscar cidades:", error);
}
} else if (codigoAbrangenciaRegional === "4" || codigoAbrangenciaRegional === "5") {
try {
// Realize uma solicita√ß√£o para buscar as cidades com base no estado
const response = await
fetch(`${baseUrl}/ListaPrestadorPorPlanoEsp?nolimit=1&id_plano=${codigoPlanoBeneficiario}&Estado=${estadoSelecionado}`,
{
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();
const cidades = [...new Set(data.map(prestador => prestador.Cidade))]; // Remove duplicatas

cidadeSelect.innerHTML = "<option value=''>Selecione uma cidade</option>"; // Limpa as op√ß√µes existentes

// Crie um conjunto para rastrear as cidades adicionadas
const cidadesAdicionadas = new Set();

// Mapeamento de estados para capitais (insira mais estados e capitais, se necess√°rio)
const capitais = {

"RS": "PORTO ALEGRE",

};

// Adicione a capital como a primeira cidade, em mai√∫sculas, apenas se ainda n√£o foi adicionada
const capital = capitais[estadoSelecionado];
if (capital && !cidadesAdicionadas.has(capital.toUpperCase())) {
cidadeSelect.innerHTML += `<option value="${capital}">${capital}</option>`;
cidadesAdicionadas.add(capital.toUpperCase());
}

// Adicione as outras cidades encontradas como op√ß√µes em mai√∫sculas
cidades.forEach(cidade => {
cidade = cidade.toUpperCase(); // Converta para mai√∫sculas
if (!cidadesAdicionadas.has(cidade)) {
cidadeSelect.innerHTML += `<option value="${cidade}">${cidade}</option>`;
cidadesAdicionadas.add(cidade);
}
});
} catch (error) {
console.error("Erro ao buscar cidades:", error);
}
}
}

cidadeSelect.addEventListener("change", function() {
const cidadeSelecionado = cidadeSelect.value;
// Chame a fun√ß√£o buscarCidades com os argumentos
buscarBairros(codigoPlanoBeneficiario, codigoAbrangenciaRegional, cidadeSelecionado);
});

async function buscarBairros(codigoPlanoBeneficiario, codigoAbrangenciaRegional) {
const estadoSelecionado = estadoSelect.value;
const cidadeSelecionada = cidadeSelect.value;
const token = await getToken();
if (codigoAbrangenciaRegional === "1" || codigoAbrangenciaRegional === "") {

try {
const response = await
fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Estado=${estadoSelecionado}&Cidade=${cidadeSelecionada}`, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();
var bairros = [...new Set(data.map(prestador => prestador.Bairro))];

bairros = sortAlphabetically(bairros);

bairroSelect.innerHTML = "<option value=''>Selecione um bairro</option>";

bairros.forEach(bairro => {
bairroSelect.innerHTML += `<option value="${bairro.toUpperCase()}">${bairro.toUpperCase()}</option>`;
});
} catch (error) {
console.error("Erro ao buscar bairros da regi√£o nacional:", error);
}

} else if (codigoAbrangenciaRegional === "3") {

try {
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Estado=RS&Cidade=${cidadeSelecionada}`, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();
const bairros = [...new Set(data.map(prestador => prestador.Bairro))];

bairroSelect.innerHTML = "<option value=''>Selecione um bairro</option>";

bairros.forEach(bairro => {
bairroSelect.innerHTML += `<option value="${bairro.toUpperCase()}">${bairro.toUpperCase()}</option>`;
});
} catch (error) {
console.error("Erro ao buscar bairros da regi√£o estadual:", error);
}

} else if (codigoAbrangenciaRegional === "4" || codigoAbrangenciaRegional === "5") {

try {

const response = await
fetch(`${baseUrl}/ListaPrestadorPorPlanoEsp?nolimit=1&id_plano=${codigoPlanoBeneficiario}&Estado=${estadoSelecionado}&Cidade=${cidadeSelecionada}`,
{
headers: {
"Authorization": `Bearer ${token}`
}
});
const data = await response.json();
const bairros = [...new Set(data.map(prestador => prestador.Bairro))];

bairroSelect.innerHTML = "<option value=''>Selecione um bairro</option>";


bairros.forEach(bairro => {
bairroSelect.innerHTML += `<option value="${bairro}">${bairro}</option>`;
});
} catch (error) {
console.error("Erro ao buscar bairros da regi√£o municipal:", error);

}
}
}

async function buscarCROs(codigoPlanoBeneficiario, codigoAbrangenciaRegional) {
const croInserido = croInputPlano.value;
const croLimpo = croInserido.replace(/^0+/, '');
const token = await getToken();
if (codigoAbrangenciaRegional === "1" || codigoAbrangenciaRegional === "") {
if (croLimpo !== '') { // Verifica se o valor n√£o √© nulo ou zero
try {
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&CRO=${croLimpo}`, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();

if (data && data.data && data.data.length > 0) {
listaProfissionais.innerHTML = ""; // Limpa a lista de profissionais

data.data.forEach(prestador => {
const areasAtuacao = prestador.Area_de_atuacao || 'N/A';
const areasAtuacaoArray = areasAtuacao.split(', ');
const ddd = prestador.DDD !== null ? prestador.DDD : '';
const telefone = prestador.Telefone !== null ? prestador.Telefone : '';
const celular = prestador.Celular !== null ? prestador.Celular : '';

const areasAtuacaoString = areasAtuacaoArray.join(', ');

listaProfissionais.innerHTML += `
<li>
    <strong>Nome:</strong> ${prestador.Nome}<br>
    <strong>Estado:</strong> ${prestador.Estado}<br>
    <strong>Cidade:</strong> ${prestador.Cidade}<br>
    <strong>Bairro:</strong> ${prestador.Bairro}<br>
    <strong>√Årea de Atua√ß√£o/Especialidade:</strong> ${areasAtuacaoString}<br>
    <strong>Endere√ßo:</strong> ${prestador.Endereco}<br>
    <strong>Telefone:</strong> (${ddd || ' '}) ${telefone || ' '}<br>
    <strong>Celular:</strong> ${celular || ' '}<br>
    <strong>CRO:</strong> ${prestador.CRO ? prestador.CRO : 'n√£o informado'}
</li>
`;
});
} else {
listaProfissionais.innerHTML = "Nenhum profissional com o CRO especificado encontrado.";
}
} catch (error) {
console.error("Erro ao buscar CRO:", error);
}
} else {
listaProfissionais.innerHTML = "Informe um n√∫mero de CRO v√°lido.";
}

} else if (codigoAbrangenciaRegional === "3") {
if (croLimpo !== '') { // Verifica se o valor n√£o √© nulo ou zero
try {
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Estado=RS&CRO=${croLimpo}`, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();

if (data && data.data && data.data.length > 0) {
listaProfissionais.innerHTML = ""; // Limpa a lista de profissionais

data.data.forEach(prestador => {
const areasAtuacao = prestador.Area_de_atuacao || 'N/A';
const areasAtuacaoArray = areasAtuacao.split(', ');
const ddd = prestador.DDD !== null ? prestador.DDD : '';
const telefone = prestador.Telefone !== null ? prestador.Telefone : '';
const celular = prestador.Celular !== null ? prestador.Celular : '';

const areasAtuacaoString = areasAtuacaoArray.join(', ');

listaProfissionais.innerHTML += `
<li>
    <strong>Nome:</strong> ${prestador.Nome}<br>
    <strong>Estado:</strong> ${prestador.Estado}<br>
    <strong>Cidade:</strong> ${prestador.Cidade}<br>
    <strong>Bairro:</strong> ${prestador.Bairro}<br>
    <strong>√Årea de Atua√ß√£o/Especialidade:</strong> ${areasAtuacaoString}<br>
    <strong>Endere√ßo:</strong> ${prestador.Endereco}<br>
    <strong>Telefone:</strong> (${ddd || ' '}) ${telefone || ' '}<br>
    <strong>Celular:</strong> ${celular || ' '}<br>
    <strong>CRO:</strong> ${prestador.CRO ? prestador.CRO : 'n√£o informado'}
</li>
`;
});
} else {
listaProfissionais.innerHTML = "Nenhum profissional com o CRO especificado encontrado.";
}
} catch (error) {
console.error("Erro ao buscar CRO:", error);
}
} else {
listaProfissionais.innerHTML = "Informe um n√∫mero de CRO v√°lido.";
}
} else if (codigoAbrangenciaRegional === "4" || codigoAbrangenciaRegional === "5") {
if (croLimpo !== '') { // Verifica se o valor n√£o √© nulo ou zero
try {
const response = await
fetch(`${baseUrl}/ListaPrestadorPorPlanoEsp?nolimit=1&id_plano=${codigoPlanoBeneficiario}&CRO=${croLimpo}`, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const data = await response.json();

if (data && data.data && data.data.length > 0) {
listaProfissionais.innerHTML = ""; // Limpa a lista de profissionais

data.data.forEach(prestador => {
const areasAtuacao = prestador.Area_de_atuacao || 'N/A';
const areasAtuacaoArray = areasAtuacao.split(', ');
const ddd = prestador.DDD !== null ? prestador.DDD : '';
const telefone = prestador.Telefone !== null ? prestador.Telefone : '';
const celular = prestador.Celular !== null ? prestador.Celular : '';

const areasAtuacaoString = areasAtuacaoArray.join(', ');

listaProfissionais.innerHTML += `
<li>
    <strong>Nome:</strong> ${prestador.Nome}<br>
    <strong>Estado:</strong> ${prestador.Estado}<br>
    <strong>Cidade:</strong> ${prestador.Cidade}<br>
    <strong>Bairro:</strong> ${prestador.Bairro}<br>
    <strong>√Årea de Atua√ß√£o/Especialidade:</strong> ${areasAtuacaoString}<br>
    <strong>Endere√ßo:</strong> ${prestador.Endereco}<br>
    <strong>Telefone:</strong> (${ddd || ' '}) ${telefone || ' '}<br>
    <strong>Celular:</strong> ${celular || ' '}<br>
    <strong>CRO:</strong> ${prestador.CRO || 'n√£o informado'}
</li>
`;
});
} else {
listaProfissionais.innerHTML = "Nenhum profissional com o CRO especificado encontrado.";
}
} catch (error) {
console.error("Erro ao buscar CRO:", error);
}
} else {
listaProfissionais.innerHTML = "Informe um n√∫mero de CRO v√°lido.";
}
}

}

async function buscarNomes(codigoPlanoBeneficiario, codigoAbrangenciaRegional) {
const nomeInserido = nomeInput.value;
const token = await getToken();
if (codigoAbrangenciaRegional === "1" || codigoAbrangenciaRegional === "") {
try {
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Nome=${nomeInserido}`, {
headers: {
"Authorization": `Bearer ${token}`
},
mode: 'no-cors'
});

const data = await response.json();

if (data && data.data && data.data.length > 0) {
listaProfissionais.innerHTML = ""; // Limpa a lista de profissionais

data.data.forEach(prestador => {
const areasAtuacao = prestador.Area_de_atuacao || 'N/A';
const areasAtuacaoArray = areasAtuacao.split(', ');
const ddd = prestador.DDD !== null ? prestador.DDD : '';
const telefone = prestador.Telefone !== null ? prestador.Telefone : '';
const celular = prestador.Celular !== null ? prestador.Celular : '';

const areasAtuacaoString = areasAtuacaoArray.join(', ');

listaProfissionais.innerHTML += `
<li>
    <strong>Nome:</strong> ${prestador.Nome}<br>
    <strong>Estado:</strong> ${prestador.Estado}<br>
    <strong>Cidade:</strong> ${prestador.Cidade}<br>
    <strong>Bairro:</strong> ${prestador.Bairro}<br>
    <strong>√Årea de Atua√ß√£o/Especialidade:</strong> ${areasAtuacaoString}<br>
    <strong>Endere√ßo:</strong> ${prestador.Endereco}<br>
    <strong>Telefone:</strong> (${ddd || ' '}) ${telefone || ' '}<br>
    <strong>Celular:</strong> ${celular || ' '}<br>
    <strong>CRO:</strong> ${prestador.CRO_UF_CRO ? prestador.CRO_UF_CRO : 'n√£o informado'}<br><br>
</li>
`;
});
} else {
listaProfissionais.innerHTML = "Nenhum profissional com o nome especificado encontrado.";
}
} catch (error) {
console.error("Erro ao buscar nome:", error);
}
} else if (codigoAbrangenciaRegional === "3") {
try {
const response = await fetch(`${baseUrl}/ListaPrestadorGeral?nolimit=1&Nome=${nomeInserido}`, {
headers: {
"Authorization": `Bearer ${token}`
},
mode: 'no-cors'
});

const data = await response.json();

if (data && data.data && data.data.length > 0) {
listaProfissionais.innerHTML = ""; // Limpa a lista de profissionais

data.data.forEach(prestador => {
const areasAtuacao = prestador.Area_de_atuacao || 'N/A';
const areasAtuacaoArray = areasAtuacao.split(', ');
const ddd = prestador.DDD !== null ? prestador.DDD : '';
const telefone = prestador.Telefone !== null ? prestador.Telefone : '';
const celular = prestador.Celular !== null ? prestador.Celular : '';

const areasAtuacaoString = areasAtuacaoArray.join(', ');

listaProfissionais.innerHTML += `
<li>
    <strong>Nome:</strong> ${prestador.Nome}<br>
    <strong>Estado:</strong> ${prestador.Estado}<br>
    <strong>Cidade:</strong> ${prestador.Cidade}<br>
    <strong>Bairro:</strong> ${prestador.Bairro}<br>
    <strong>√Årea de Atua√ß√£o/Especialidade:</strong> ${areasAtuacaoString}<br>
    <strong>Endere√ßo:</strong> ${prestador.Endereco}<br>
    <strong>Telefone:</strong> (${ddd || ' '}) ${telefone || ' '}<br>
    <strong>Celular:</strong> ${celular || ' '}<br>
    <strong>CRO:</strong> ${prestador.CRO_UF_CRO ? prestador.CRO_UF_CRO : 'n√£o informado'}<br><br>
</li>
`;
});
} else {
listaProfissionais.innerHTML = "Nenhum profissional com o nome especificado encontrado.";
}
} catch (error) {
console.error("Erro ao buscar nome:", error);
}
} else if (codigoAbrangenciaRegional === "4" || codigoAbrangenciaRegional === "5") {
try {
const response = await
fetch(`${baseUrl}/ListaPrestadorPorPlanoEsp?nolimit=1&id_plano=${codigoPlanoBeneficiario}&Nome=${nomeInserido}`, {
headers: {
"Authorization": `Bearer ${token}`
},
mode: 'no-cors'
});

const data = await response.json();

if (data && data.data && data.data.length > 0) {
listaProfissionais.innerHTML = ""; // Limpa a lista de profissionais

data.data.forEach(prestador => {
const areasAtuacao = prestador.Area_de_atuacao || 'N/A';
const areasAtuacaoArray = areasAtuacao.split(', ');
const ddd = prestador.DDD !== null ? prestador.DDD : '';
const telefone = prestador.Telefone !== null ? prestador.Telefone : '';
const celular = prestador.Celular !== null ? prestador.Celular : '';

const areasAtuacaoString = areasAtuacaoArray.join(', ');

listaProfissionais.innerHTML += `
<li>
    <strong>Nome:</strong> ${prestador.Nome}<br>
    <strong>Estado:</strong> ${prestador.Estado}<br>
    <strong>Cidade:</strong> ${prestador.Cidade}<br>
    <strong>Bairro:</strong> ${prestador.Bairro}<br>
    <strong>√Årea de Atua√ß√£o/Especialidade:</strong> ${areasAtuacaoString}<br>
    <strong>Endere√ßo:</strong> ${prestador.Endereco}<br>
    <strong>Telefone:</strong> (${ddd || ' '}) ${telefone || ' '}<br>
    <strong>Celular:</strong> ${celular || ' '}<br>
    <strong>CRO:</strong> ${prestador.CRO_UF_CRO ? prestador.CRO_UF_CRO : 'n√£o informado'}<br><br>
</li>
`;
});
} else {
listaProfissionais.innerHTML = "Nenhum profissional com o nome especificado encontrado.";
}
} catch (error) {
console.error("Erro ao buscar nome:", error);
}
}
}

async function filtrarPorAreaAtuacao(codigoAbrangenciaRegional, codigoPlanoBeneficiario) {
const areaSelecionada = especialidadeSelect.value;
const token = await getToken();
carregarProfissionais(areaSelecionada);
}

async function carregarProfissionais() {
overlay.style.display = 'flex';
const areaAtuacaoSelecionada = especialidadeSelect.value;
const token = await getToken();
const croInserido = croInput.value;
const croLimpo = croInserido.replace(/^0+/, ''); // Limpar os zeros √† esquerda

buscarProfissionais(1, areaAtuacaoSelecionada, croLimpo);

}


// Definindo quantidade de prestadores por p√°gina
const perPage = 10;

async function buscarProfissionais(page = 1, areaSelecionada = null, croLimpo = null) {
overlay.style.display = 'flex';
const estadoSelecionado = estadoSelect.value;
const cidadeSelecionada = cidadeSelect.value;
const bairroSelecionado = bairroSelect.value;
const nomeInserido = nomeInput.value;
const token = await getToken();


if (codigoAbrangenciaRegional === "1" || codigoAbrangenciaRegional === "") {
try {
let apiUrl =
`${baseUrl}/ListaPrestadorGeral?Estado=${estadoSelecionado}&Cidade=${cidadeSelecionada}&Bairro=${bairroSelecionado}&Nome=${nomeInserido}&page=${page}&per_page=${perPage}`;
let apiUrlNoLimit =
`${baseUrl}/ListaPrestadorGeral?Estado=${estadoSelecionado}&Cidade=${cidadeSelecionada}&Bairro=${bairroSelecionado}&Nome=${nomeInserido}&nolimit=1`;

if (areaSelecionada) {
apiUrl += `&Area_de_atuacao=${encodeURIComponent(areaSelecionada)}`;
apiUrlNoLimit += `&Area_de_atuacao=${encodeURIComponent(areaSelecionada)}`;
}

if (croLimpo) {
apiUrl += `&CRO=${croLimpo}`;
apiUrlNoLimit += `&CRO=${croLimpo}`;
}

const response = await fetch(apiUrl, {
headers: {
"Authorization": `Bearer ${token}`
}
});

console.log(apiUrl)
const responseNoLimit = await fetch(apiUrlNoLimit, {
headers: {
"Authorization": `Bearer ${token}`
}
});

if (responseNoLimit.ok) {
const dataNoLimit = await responseNoLimit.json();
localStorage.setItem('prestadoresPDF', JSON.stringify(dataNoLimit));
}

if (response.ok) {
const data = await response.json();

console.log(data);

listaProfissionais.innerHTML = "";
document.getElementById("pagination").innerHTML = "";

let prestadores = {};

data.data.forEach(prestador => {
if (!(prestador.Nome in prestadores)) {
prestadores[prestador.Nome] = {
Nome: prestador.Nome,
CRO: prestador.CRO,
Contatos: [],
AreasAtuacao: new Set()
};
}

prestadores[prestador.Nome].Contatos.push({
Endereco: `${prestador.Endereco}, ${prestador.Bairro}, ${prestador.Cidade}, ${prestador.Estado}`,
Telefone: prestador.Telefone ? `(${prestador.DDD || ''}) ${prestador.Telefone}` : null,
Celular: prestador.Celular ? `${prestador.Celular}` : null
});

prestadores[prestador.Nome].AreasAtuacao.add(prestador.Area_de_atuacao);
});

let resultadosExibidos = 0;

for (const nome in prestadores) {
if (resultadosExibidos >= perPage) {
break;
}

const { Nome, CRO, Contatos, AreasAtuacao } = prestadores[nome];
let areasAtuacaoString = Array.from(AreasAtuacao).join(', ');

// Cria o cont√™iner do item
let item = document.createElement("li");
item.style = "color: #a60069; font-family: 'Georama', sans-serif; font-weight: 500; cursor: pointer;";

// Cabe√ßalho do item (vis√≠vel sempre)
let header = document.createElement("div");
header.style = "display: flex; justify-content: space-between; align-items: center;";
header.innerHTML = `
<span>
    <strong>Nome:</strong> ${Nome}
    <strong>CRO:</strong> ${CRO}<br>
    <strong>√Åreas de Atua√ß√£o:</strong> ${areasAtuacaoString || 'Cl√≠nica Geral'}
</span>
<span class="chevron">‚ñº</span>
`;
item.appendChild(header);

// Conte√∫do detalhado (inicialmente oculto)
let details = document.createElement("div");
details.style = "display: none; margin-top: 10px;";

Contatos.forEach((contato, index) => {
let contatoHTML = `
<div style="margin-bottom: 8px;">
    <strong>Endere√ßo:</strong> ${contato.Endereco}<br>
    ‚Ä¢ <strong>Telefone:</strong> ${contato.Telefone || 'N√£o informado'}
    ‚Ä¢ <strong>Celular:</strong> ${contato.Celular || 'N√£o informado'}<br>
</div>`;
details.innerHTML += contatoHTML;
});

item.appendChild(details);

// Adiciona funcionalidade de sanfona
header.onclick = () => {
const chevron = header.querySelector('.chevron');
if (details.style.display === "none") {
details.style.display = "block";
chevron.textContent = "‚ñ≤"; // Chevron para cima
} else {
details.style.display = "none";
chevron.textContent = "‚ñº"; // Chevron para baixo
}
};

listaProfissionais.appendChild(item);

resultadosExibidos++;
}

containerFluid.style.transform = "translateX(0)";
overlay.style.display = 'none';

const textone = document.querySelector('.texto-personalizado');
textone.style.display = "none";

const pagination = document.getElementById("pagination");
pagination.innerHTML = "";

const paginationDiv = document.createElement("div");
paginationDiv.textContent = `P√°gina ${page} de ${data.last_page}`;

const lineBreak = document.createElement("br");
paginationDiv.appendChild(lineBreak);

const previousButton = document.createElement("button");
previousButton.textContent = "Anterior";
previousButton.disabled = page === 1;
previousButton.onclick = () => buscarProfissionais(page - 1, areaSelecionada);
previousButton.style.marginRight = "10px";
previousButton.style.width = "100px";

const nextButton = document.createElement("button");
nextButton.textContent = "Pr√≥xima";
nextButton.disabled = page === data.last_page;
nextButton.onclick = () => buscarProfissionais(page + 1, areaSelecionada);
nextButton.style.width = "100px";

paginationDiv.appendChild(previousButton);
paginationDiv.appendChild(nextButton);
pagination.appendChild(paginationDiv);
}




else {
listaProfissionais.innerHTML = "Nenhum profissional encontrado.";
}


} catch (error) {
console.error("Erro ao buscar profissionais:", error);
listaProfissionais.innerHTML = "Erro ao buscar profissionais.";
}

} else if (codigoAbrangenciaRegional === "3") {

try {
let apiUrl =
`${baseUrl}/ListaPrestadorGeral?Estado=RS&Cidade=${cidadeSelecionada}&Bairro=${bairroSelecionado}&Nome=${nomeInserido}&page=${page}&per_page=${perPage}`;
let apiForAll =
`${baseUrl}/ListaPrestadorGeral?Estado=RS&Cidade=${cidadeSelecionada}&Bairro=${bairroSelecionado}&Nome=${nomeInserido}&nolimit=1`;

if (areaSelecionada) {
apiUrl += `&Area_de_atuacao=${encodeURIComponent(areaSelecionada)}`;
apiForAll += `&Area_de_atuacao=${encodeURIComponent(areaSelecionada)}`;
}

if (croLimpo) {
apiUrl += `&CRO=${croLimpo}`;
apiForAll += `&CRO=${croLimpo}`;
}

const response = await fetch(apiUrl, {
headers: {
"Authorization": `Bearer ${token}`
}
});

const responseForAll = await fetch(apiForAll, {
headers: {
"Authorization": `Bearer ${token}`
}
});

if (responseForAll.ok) {
const dataForAll = await responseForAll.json();
localStorage.setItem('prestadoresPDF', JSON.stringify(dataForAll));
}


if (response.ok) {
const data = await response.json();

console.log(data);

listaProfissionais.innerHTML = "";
document.getElementById("pagination").innerHTML = "";

let prestadores = {};

data.data.forEach(prestador => {
if (!(prestador.Nome in prestadores)) {
prestadores[prestador.Nome] = {
Nome: prestador.Nome,
CRO: prestador.CRO,
Contatos: [],
AreasAtuacao: new Set()
};
}

prestadores[prestador.Nome].Contatos.push({
Endereco: `${prestador.Endereco}, ${prestador.Bairro}, ${prestador.Cidade}, ${prestador.Estado}`,
Telefone: prestador.Telefone ? `(${prestador.DDD || ''}) ${prestador.Telefone}` : null,
Celular: prestador.Celular ? `${prestador.Celular}` : null
});

prestadores[prestador.Nome].AreasAtuacao.add(prestador.Area_de_atuacao);
});

let resultadosExibidos = 0;

for (const nome in prestadores) {
if (resultadosExibidos >= perPage) {
break;
}

const { Nome, CRO, Contatos, AreasAtuacao } = prestadores[nome];
let areasAtuacaoString = Array.from(AreasAtuacao).join(', ');

// Cria o cont√™iner do item
let item = document.createElement("li");
item.style = "color: #a60069; font-family: 'Georama', sans-serif; font-weight: 500; cursor: pointer;";

// Cabe√ßalho do item (vis√≠vel sempre)
let header = document.createElement("div");
header.style = "display: flex; justify-content: space-between; align-items: center;";
header.innerHTML = `
<span>
    <strong>Nome:</strong> ${Nome}
    <strong>CRO:</strong> ${CRO}<br>
    <strong>√Åreas de Atua√ß√£o:</strong> ${areasAtuacaoString || 'Cl√≠nica Geral'}
</span>
<span class="chevron">‚ñº</span>
`;
item.appendChild(header);

// Conte√∫do detalhado (inicialmente oculto)
let details = document.createElement("div");
details.style = "display: none; margin-top: 10px;";

Contatos.forEach((contato, index) => {
let contatoHTML = `
<div style="margin-bottom: 8px;">
    <strong>Endere√ßo:</strong> ${contato.Endereco}<br>
    ‚Ä¢ <strong>Telefone:</strong> ${contato.Telefone || 'N√£o informado'}
    ‚Ä¢ <strong>Celular:</strong> ${contato.Celular || 'N√£o informado'}<br>
</div>`;
details.innerHTML += contatoHTML;
});

item.appendChild(details);

// Adiciona funcionalidade de sanfona
header.onclick = () => {
const chevron = header.querySelector('.chevron');
if (details.style.display === "none") {
details.style.display = "block";
chevron.textContent = "‚ñ≤"; // Chevron para cima
} else {
details.style.display = "none";
chevron.textContent = "‚ñº"; // Chevron para baixo
}
};

listaProfissionais.appendChild(item);

resultadosExibidos++;
}

containerFluid.style.transform = "translateX(0)";
overlay.style.display = 'none';

const textone = document.querySelector('.texto-personalizado');
textone.style.display = "none";

const pagination = document.getElementById("pagination");
pagination.innerHTML = "";

const paginationDiv = document.createElement("div");
paginationDiv.textContent = `P√°gina ${page} de ${data.last_page}`;

const lineBreak = document.createElement("br");
paginationDiv.appendChild(lineBreak);

const previousButton = document.createElement("button");
previousButton.textContent = "Anterior";
previousButton.disabled = page === 1;
previousButton.onclick = () => buscarProfissionais(page - 1, areaSelecionada);
previousButton.style.marginRight = "10px";
previousButton.style.width = "100px";

const nextButton = document.createElement("button");
nextButton.textContent = "Pr√≥xima";
nextButton.disabled = page === data.last_page;
nextButton.onclick = () => buscarProfissionais(page + 1, areaSelecionada);
nextButton.style.width = "100px";

paginationDiv.appendChild(previousButton);
paginationDiv.appendChild(nextButton);
pagination.appendChild(paginationDiv);
}




else {
listaProfissionais.innerHTML = "Nenhum profissional encontrado.";
}
} catch (error) {
console.error("Erro ao buscar profissionais:", error);
listaProfissionais.innerHTML = "Erro ao buscar profissionais.";
}
} else if (codigoAbrangenciaRegional === "4" || codigoAbrangenciaRegional === "5") {
try {
let apiUrl =
`${baseUrl}/ListaPrestadorPorPlanoEsp?id_plano=${codigoPlanoBeneficiario}&Estado=RS&Cidade=${cidadeSelecionada}&Bairro=${bairroSelecionado}&Nome=${nomeInserido}&page=${page}&per_page=${perPage}`;
let apiForAll =
`${baseUrl}/ListaPrestadorGeral?Estado=${estadoSelecionado}&Cidade=${cidadeSelecionada}&Bairro=${bairroSelecionado}&Nome=${nomeInserido}&nolimit=1`

if (areaSelecionada === 'Cl√≠nica Geral') {
areaSelecionada = 'Clinica Geral';
} else if (areaSelecionada === 'Cirurgia e Traumatologia Buco-Maxilo-Faciais') {
areaSelecionada = 'CIRURGIA E TRAUMATOLOGICA BUCO-MAXILO-FACIAL';
} else if (areaSelecionada === 'Disfun√ß√£o T√™mporo-Mandibular e Dor-Orofacial') {
areaSelecionada = 'DISFUNCAO TEMPORO-MANDIBULAR E DOR-OROFACIAL';
}


if (areaSelecionada) {
apiUrl += `&Area_de_atuacao=${encodeURIComponent(areaSelecionada)}`;
apiForAll += `&Area_de_atuacao=${encodeURIComponent(areaSelecionada)}`;
}

if (croLimpo) {
apiUrl += `&CRO=${croLimpo}`;
apiForAll += `&CRO=${croLimpo}`;
}

const response = await fetch(apiUrl, {
headers: {
"Authorization": `Bearer ${token}`
}
});


const allPrest = await fetch(apiForAll, {
headers: {
"Authorization": `Bearer ${token}`
}
});

if (allPrest.ok) {
const data = await allPrest.json();

localStorage.setItem('prestadoresPDF', JSON.stringify(data));
}

if (response.ok) {
const data = await response.json();

console.log(data);

listaProfissionais.innerHTML = "";
document.getElementById("pagination").innerHTML = "";

let prestadores = {};

data.data.forEach(prestador => {
if (!(prestador.Nome in prestadores)) {
prestadores[prestador.Nome] = {
Nome: prestador.Nome,
CRO: prestador.CRO,
Contatos: [],
AreasAtuacao: new Set()
};
}

prestadores[prestador.Nome].Contatos.push({
Endereco: `${prestador.Endereco}, ${prestador.Bairro}, ${prestador.Cidade}, ${prestador.Estado}`,
Telefone: prestador.Telefone ? `(${prestador.DDD || ''}) ${prestador.Telefone}` : null,
Celular: prestador.Celular ? `${prestador.Celular}` : null
});

prestadores[prestador.Nome].AreasAtuacao.add(prestador.Area_de_atuacao);
});

let resultadosExibidos = 0;

for (const nome in prestadores) {
if (resultadosExibidos >= perPage) {
break;
}

const { Nome, CRO, Contatos, AreasAtuacao } = prestadores[nome];
let areasAtuacaoString = Array.from(AreasAtuacao).join(', ');

// Cria o cont√™iner do item
let item = document.createElement("li");
item.style = "color: #a60069; font-family: 'Georama', sans-serif; font-weight: 500; cursor: pointer;";

// Cabe√ßalho do item (vis√≠vel sempre)
let header = document.createElement("div");
header.style = "display: flex; justify-content: space-between; align-items: center;";
header.innerHTML = `
<span>
    <strong>Nome:</strong> ${Nome}
    <strong>CRO:</strong> ${CRO}<br>
    <strong>√Åreas de Atua√ß√£o:</strong> ${areasAtuacaoString || 'Cl√≠nica Geral'}
</span>
<span class="chevron">‚ñº</span>
`;
item.appendChild(header);

// Conte√∫do detalhado (inicialmente oculto)
let details = document.createElement("div");
details.style = "display: none; margin-top: 10px;";

Contatos.forEach((contato, index) => {
let contatoHTML = `
<div style="margin-bottom: 8px;">
    <strong>Endere√ßo:</strong> ${contato.Endereco}<br>
    ‚Ä¢ <strong>Telefone:</strong> ${contato.Telefone || 'N√£o informado'}
    ‚Ä¢ <strong>Celular:</strong> ${contato.Celular || 'N√£o informado'}<br>
</div>`;
details.innerHTML += contatoHTML;
});

item.appendChild(details);

// Adiciona funcionalidade de sanfona
header.onclick = () => {
const chevron = header.querySelector('.chevron');
if (details.style.display === "none") {
details.style.display = "block";
chevron.textContent = "‚ñ≤"; // Chevron para cima
} else {
details.style.display = "none";
chevron.textContent = "‚ñº"; // Chevron para baixo
}
};

listaProfissionais.appendChild(item);

resultadosExibidos++;
}

containerFluid.style.transform = "translateX(0)";
overlay.style.display = 'none';

const textone = document.querySelector('.texto-personalizado');
textone.style.display = "none";

const pagination = document.getElementById("pagination");
pagination.innerHTML = "";

const paginationDiv = document.createElement("div");
paginationDiv.textContent = `P√°gina ${page} de ${data.last_page}`;

const lineBreak = document.createElement("br");
paginationDiv.appendChild(lineBreak);

const previousButton = document.createElement("button");
previousButton.textContent = "Anterior";
previousButton.disabled = page === 1;
previousButton.onclick = () => buscarProfissionais(page - 1, areaSelecionada);
previousButton.style.marginRight = "10px";
previousButton.style.width = "100px";

const nextButton = document.createElement("button");
nextButton.textContent = "Pr√≥xima";
nextButton.disabled = page === data.last_page;
nextButton.onclick = () => buscarProfissionais(page + 1, areaSelecionada);
nextButton.style.width = "100px";

paginationDiv.appendChild(previousButton);
paginationDiv.appendChild(nextButton);
pagination.appendChild(paginationDiv);
}


else {
listaProfissionais.innerHTML = "Nenhum profissional encontrado.";
}
} catch (error) {
console.error("Erro ao buscar profissionais:", error);
listaProfissionais.innerHTML = "Erro ao buscar profissionais.";
}
}


//rolar a pagina para a div listaProfissionais
window.scrollTo({ top: document.getElementById('listaProfissionais').offsetTop+200, behavior: 'smooth' });
document.querySelector('.resultTitle').style.display = "block";

}

function removerEspacosEntrePalavras(str) {
return str.replace(/\s+/g, ''); // Remove todos os espa√ßos
}

function removerAcentos(str) {
return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
}


function gerarListaPrestadoresHTML() {
// Obt√©m os dados armazenados no localStorage
const prestadoresData = localStorage.getItem('prestadoresPDF');

// Verifica se h√° dados armazenados
if (!prestadoresData) {
console.error('Nenhum dado encontrado no localStorage.');
return null;
}

// Converte os dados JSON em um objeto JavaScript
let prestadores;
try {
prestadores = JSON.parse(prestadoresData);
} catch (error) {
console.error('Erro ao converter os dados JSON:', error);
return null;
}

// Agrupa os prestadores por nome
const prestadoresAgrupados = {};

prestadores.forEach(prestador => {
if (!prestadoresAgrupados[prestador.Nome]) {
prestadoresAgrupados[prestador.Nome] = {
Nome: prestador.Nome,
CRO: prestador.CRO,
Contatos: [],
AreasAtuacao: new Set()
};
}

prestadoresAgrupados[prestador.Nome].Contatos.push({
Endereco: `${prestador.Endereco}, ${prestador.Bairro}, ${prestador.Cidade}, ${prestador.Estado}`,
Telefone: prestador.Telefone ? `(${prestador.DDD}) ${prestador.Telefone}` : null,
Celular: prestador.Celular || null
});

prestadoresAgrupados[prestador.Nome].AreasAtuacao.add(prestador.Area_de_atuacao);
});

// Cria um fragmento de documento para armazenar os elementos HTML
const fragment = document.createDocumentFragment();

// Itera sobre cada prestador agrupado
for (const nome in prestadoresAgrupados) {
const { Nome, CRO, Contatos, AreasAtuacao } = prestadoresAgrupados[nome];
let areasAtuacaoString = Array.from(AreasAtuacao).join(', ');

// Cria o elemento <li>
    const li = document.createElement('li');
    li.style.color = '#a60069';
    li.style.fontFamily = 'Georama, sans-serif';
    li.style.fontWeight = '500';

    // Preenche o conte√∫do do
<li>
    li.innerHTML = `
    <strong>Nome:</strong> ${Nome}
    <strong> CRO:</strong> ${CRO}<br>
    `;

    // Adiciona cada contato
    Contatos.forEach(contato => {
    li.innerHTML += `
    <div style="margin-bottom: 8px;">
        <strong>Endere√ßo:</strong> ${contato.Endereco}<br>
        ‚Ä¢ <strong>Telefone:</strong> ${contato.Telefone || 'N√£o informado'}
        ‚Ä¢ <strong>Celular:</strong> ${contato.Celular || 'N√£o informado'}<br>
    </div>
    `;
    });

    li.innerHTML += `
    <strong>√Åreas de Atua√ß√£o:</strong> ${areasAtuacaoString || 'Cl√≠nica Geral'}<br><br>
    `;

    // Adiciona o elemento
<li> ao fragmento
    fragment.appendChild(li);
    }

    // Retorna o fragmento HTML
    return fragment;
    }

    async function visualizarPDF() {
    console.log(JSON.parse(localStorage.getItem('prestadoresPDF')));
    try {
    // Cria uma c√≥pia da lista de profissionais para a visualiza√ß√£o
    const listaVisualizacao = gerarListaPrestadoresHTML();

    // Cria um div tempor√°rio para armazenar o conte√∫do do DocumentFragment
    const tempDiv = document.createElement('div');
    tempDiv.appendChild(listaVisualizacao);

    // Remove os bot√µes de a√ß√£o da visualiza√ß√£o (se houver)
    const botoesAcao = tempDiv.querySelectorAll('button');
    botoesAcao.forEach(botao => botao.remove());

    // Aplica estilos alternados diretamente ao HTML gerado
    const itensLista = tempDiv.querySelectorAll('li');
    itensLista.forEach((item, index) => {
    // Aplica estilo branco para √≠ndices pares e cinza para √≠mpares
    item.style.backgroundColor = index % 2 === 0 ? 'white' : '#f0f0f0';

    // Adiciona will-change para propriedades de gr√°ficos
    item.classList.add('grafico-will-change');
    });

    // Cria uma nova janela/tempor√°ria para exibir a visualiza√ß√£o
    const novaJanela = window.open('', '_blank');
    novaJanela.document.write('<html>

    <head>
        <title>Prestadores Uniodonto Porto Alegre</title>
    </head>

    <body>');

        // Adiciona a lista visualizada √† nova janela
        novaJanela.document.write(tempDiv.innerHTML);

        novaJanela.document.write('</body>

    </html>');
    novaJanela.document.close();

    // Espera um breve momento para garantir que a visualiza√ß√£o esteja pronta
    await new Promise(resolve => setTimeout(resolve, 500));

    // Adiciona uma folha de estilo de m√≠dia para a impress√£o
    const styleForPrint = novaJanela.document.createElement('style');
    styleForPrint.textContent = `
    @media print {
    .impressao li {
    margin-bottom: 5px; /* Adicione o espa√ßamento desejado entre os elementos */
    list-style: none; /* Remova os marcadores de lista, se aplic√°vel */
    padding: 5px; /* Adicione espa√ßamento interno, se desejado */
    }

    .impressao li:nth-child(even) {
    background-color: white !important;
    }

    .impressao li:nth-child(odd) {
    background-color: #f0f0f0 !important;
    }
    }
    `;
    novaJanela.document.head.appendChild(styleForPrint);

    // Imprime a visualiza√ß√£o
    novaJanela.print();

    // Fecha a janela/tempor√°ria ap√≥s a impress√£o
    setTimeout(() => {
    novaJanela.close();
    }, 2000); // Feche ap√≥s 2 segundos (ajuste conforme necess√°rio)

    } catch (error) {
    console.error("Erro ao visualizar para impress√£o:", error);
    }
    }

    function mostrarDivIdentificador() {

    const doubts = document.querySelector('.doubts');

    doubts.style.display = 'none';

    saudacaoInicial.style.display = "none";

    event.preventDefault();
    var divIdentificador = document.getElementById("form-identificador");
    var divUnipoa = document.getElementById("form-unipoa");

    if (divIdentificador) {
    divIdentificador.style.display = "block";

    //rolar a pagina para a divIdentificador
    window .scrollTo({ top: document.getElementById('form-identificador').offsetTop-50, behavior: 'smooth' });
    document.getElementById("cpf").focus();

    }



    if (divUnipoa) {
    divUnipoa.style.display = "none";
    }

    // Ocultar a div de clientes
    ocultarDivClientes();
    }

    function mostrarDivUnipoa() {
    event.preventDefault();
    const doubts = document.querySelector('.doubts');

    doubts.style.display = 'none';
    saudacaoInicial.style.display = "none";

    var divIdentificador = document.getElementById("form-identificador");
    var divUnipoa = document.getElementById("form-unipoa");

    if (divIdentificador) {
    divIdentificador.style.display = "none";
    }

    if (divUnipoa) {
    divUnipoa.style.display = "block";
    // Rolamento suave at√© a divUnipoa
    window.scrollTo({ top: document.getElementById('form-unipoa').offsetTop, behavior: 'smooth' });
    }
    // Ocultar a div de clientes
    ocultarDivClientes();
    }

    function resetDescricaoNome() {
    const nomeElement = document.getElementById("nome-beneficiario");
    nomeElement.textContent = "";
    }

    function resetDescricaoPlano() {
    const descricaoPlanoElement = document.getElementById("descricao-plano");
    descricaoPlanoElement.textContent = ""; // Limpa o conte√∫do da div
    }

    function recarregarPagina() {
    location.reload(true); // O par√¢metro true for√ßa a recarga a partir do servidor, ignorando o cache
    }

    function ocultarDivClientes() {
    // Ocultar a div de clientes
    var divClientes = document.querySelector('.btn-clientes');
    if (divClientes) {
    divClientes.style.display = 'none';
    }
    }